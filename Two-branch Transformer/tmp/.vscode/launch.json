{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "score",
            "type": "python",
            "request": "launch",
            "program": "molecule/score.py",
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "args": [
                "/blob/v-jinhzh/data/pretrainmol/retrosys/baseline/USPTOfull_bsz_8092_a_transformer_lr_5e-4/checkpoint80.pt.generate-test.txt",
                "--topk"
            ]
        },
        {
            "name": "baseline genrate",
            "type": "python",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "fairseq_cli/generate.py",
            "console": "integratedTerminal",
            "args": [
                "data/USPTO50K/bin/input0",
                "--path",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/retrosys/uspto50k/checkpoint100.pt",
                "--batch-size",
                "16",
                "--beam",
                "50",
                "--nbest",
                "50"
            ]
        },
        {
            "name": "generate reosys",
            "type": "python",
            "request": "launch",
            "program": "fairseq_cli/generate.py",
            "env": {
                "CUDA_VISIBLE_DEVICES": "2"
            },
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "args": [
                "data/USPTO50K/bin/",
                "--path",
                "checkpoints/checkpoint_last.pt",
                "--batch-size",
                "16",
                "--beam",
                "50",
                "--nbest",
                "50",
                "--task",
                "retrosys",
                "--results-path",
                "results"
            ],
            "justMyCode": false
        },
        {
            "name": "translation",
            "type": "python",
            "request": "launch",
            "program": "fairseq_cli/train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "data-bin/iwslt14.tokenized.de-en",
                "--arch",
                "transformer_iwslt_de_en",
                "--share-all-embeddings",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--clip-norm",
                "0.0",
                "--lr",
                "5e-4",
                "--lr-scheduler",
                "inverse_sqrt",
                "--warmup-updates",
                "4000",
                "--dropout",
                "0.3",
                "--weight-decay",
                "0.0001",
                "--criterion",
                "label_smoothed_cross_entropy",
                "--label-smoothing",
                "0.1",
                "--max-tokens",
                "4096",
                "--eval-bleu",
                "--eval-bleu-detok",
                "moses",
                "--eval-bleu-remove-bpe",
                "--eval-bleu-print-samples",
                "--best-checkpoint-metric",
                "bleu",
                "--maximize-best-checkpoint-metric"
            ]
        },
        {
            "name": "retrosys",
            "type": "python",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "request": "launch",
            "program": "fairseq_cli/train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "/blob/v-jinhzh/data/pretrainmol/retrosys/uspto50k/USPTO50K/bin",
                "--task",
                "retrosys",
                "--arch",
                "transformer_iwslt_de_en_retrosys",
                "--optimizer",
                "adam",
                "--share-all-embeddings",
                "--lr",
                "5e-5",
                "--label-smoothing",
                "0.1",
                "--dropout",
                "0.3",
                "--max-tokens",
                "4096",
                "--activation-dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--lr-scheduler",
                "inverse_sqrt",
                "--weight-decay",
                "0.0001",
                "--criterion",
                "label_smoothed_cross_entropy",
                "--max-update",
                "100000",
                "--warmup-updates",
                "4000",
                "--warmup-init-lr",
                "1e-07",
                "--adam-betas",
                "(0.9, 0.98)",
                "--finetune-from-model",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/retrosys/uspto50k/checkpoint100.pt.plm",
                "--gradmultiply",
                "10",
                "--save-dir",
                "checkpoints/debug",
                "--finetune-plm",
                "--plm-as-encoder"
            ]
        },
        {
            "name": "preprocess",
            "type": "python",
            "request": "launch",
            "program": "fairseq_cli/preprocess.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "--only-source",
                "--trainpref",
                "molecule/sider/Congenital,_familial_and_genetic_disorders/train.input0.bpe",
                "--validpref",
                "molecule/sider/Congenital,_familial_and_genetic_disorders/dev.input0.bpe",
                "--testpref",
                "molecule/sider/Congenital,_familial_and_genetic_disorders/test.input0.bpe",
                "--destdir",
                "molnet-bin/sider/Congenital,_familial_and_genetic_disorders/input0",
                "--workers",
                "30",
                "--srcdict",
                "molecule/dict.txt",
                "--molecule"
            ]
        },
        {
            "name": "format data",
            "type": "python",
            "request": "launch",
            "program": "molecule/formatdata.py",
            "console": "integratedTerminal",
            "args": [
                "kfold_s0_qm8"
            ]
        },
        {
            "name": "plot",
            "type": "python",
            "request": "launch",
            "program": "plot.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "--log-fns",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/g-pubchem-10m-onemodel-tu-125000-wu-10000-lr-0.0005-uf-16-mt-8192/training.log",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/tt-pubchem-10m-doublemodel-tu-125000-wu-10000-lr-0.0005-uf-16-mt-8192-usemlm-encodernormalizebefore/training.log",
                "--key-words",
                "loss",
                "mlm_loss_0",
                "--legends",
                "gnn",
                "tf"
            ]
        },
        {
            "name": "finetune doublemodel",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "env": {
                "CUDA_VISIBLE_DEVICES": "6"
            },
            "cwd": "${workspaceFolder}",
            "args": [
                "/blob/v-jinhzh/data/kddcup/bindata",
                "--max-positions",
                "512",
                "--batch-size",
                "32",
                "--task",
                "kddcup",
                "--required-batch-size-multiple",
                "1",
                "--arch",
                "doublemodel",
                "--criterion",
                "graph_sp",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.01",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-06",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "2e-4",
                "--total-num-update",
                "118960",
                "--warmup-updates",
                "7138",
                "--max-epoch",
                "10",
                "--best-checkpoint-metric",
                "accuracy",
                "--maximize-best-checkpoint-metric",
                "--shorten-method",
                "truncate",
                "--find-unused-parameters",
                "--update-freq",
                "1",
                "--save-dir",
                "checkpoints/debug",
                "--datatype",
                "gg",
                "--scaler-label",
                "--distill-step",
                "300"
            ],
            "justMyCode": false
        },
        {
            "name": "finetune onemodel",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "molnet-bin/clintox",
                "--restore-file",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/g-pubchem-10m-onemodel-tu-125000-wu-10000-lr-0.0005-uf-16-mt-8192/checkpoint_21_5000.pt",
                "--max-positions",
                "512",
                "--batch-size",
                "8",
                "--max-tokens",
                "4400",
                "--task",
                "graph_sp",
                "--reset-optimizer",
                "--reset-dataloader",
                "--reset-meters",
                "--required-batch-size-multiple",
                "1",
                "--arch",
                "onemodel",
                "--criterion",
                "graph_sp",
                "--classification-head-name",
                "molecule_head",
                "--num-classes",
                "2",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.1",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-06",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "3e-5",
                "--total-num-update",
                "1480",
                "--warmup-updates",
                "89",
                "--fp16",
                "--fp16-init-scale",
                "4",
                "--threshold-loss-scale",
                "1",
                "--fp16-scale-window",
                "128",
                "--max-epoch",
                "10",
                "--best-checkpoint-metric",
                "accuracy",
                "--maximize-best-checkpoint-metric",
                "--shorten-method",
                "truncate",
                "--find-unused-parameters",
                "--update-freq",
                "1",
                "--save-dir",
                "checkpoints/clintox"
            ],
            "justMyCode": false
        },
        {
            "name": "tg pretrain",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "/blob/v-jinhzh/data/pubchem/graphseq/bin_data/pubchem-1m",
                "--task",
                "doublemodel",
                "--criterion",
                "doublemodel",
                "--arch",
                "doublemodel",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-6",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "0.0003",
                "--warmup-updates",
                "10000",
                "--total-num-update",
                "125000",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.01",
                "--max-update",
                "125000",
                "--log-format",
                "simple",
                "--log-interval",
                "10",
                "--save-dir",
                "checkpoints/debug2",
                "--validate-interval-updates",
                "1000",
                "--save-interval-updates",
                "1000",
                "--max-tokens",
                "4096",
                "--graph-mask-prob",
                "0.3",
                "--seq-mask-prob",
                "0.3",
                "--fp16",
                "--datatype",
                "tg",
                "--use-contrastive",
                "--use-mlm",
                "--use-bottleneck-head",
                "--required-batch-size-multiple",
                "4",
                "--bottleneck-layer",
                "3"
            ],
            "justMyCode": false
        },
        {
            "name": "gg pretrain",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "/blob/v-jinhzh/data/pubchem/graphseq/bin_data/pubchem-1m",
                "--task",
                "doublemodel",
                "--criterion",
                "doublemodel",
                "--arch",
                "doublemodel",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-6",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "0.0003",
                "--warmup-updates",
                "10000",
                "--total-num-update",
                "125000",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.01",
                "--max-update",
                "125000",
                "--log-format",
                "simple",
                "--log-interval",
                "10",
                "--save-dir",
                "checkpoints/debug2",
                "--validate-interval-updates",
                "1000",
                "--save-interval-updates",
                "1000",
                "--max-tokens",
                "4096",
                "--graph-mask-prob",
                "0.3",
                "--seq-mask-prob",
                "0.3",
                "--fp16",
                "--datatype",
                "gg",
                "--use-contrastive",
                "--use-mlm",
                "--use-bottleneck-head",
                "--required-batch-size-multiple",
                "4",
                "--bottleneck-layer",
                "3"
            ],
            "justMyCode": false
        },
        {
            "name": "onemodel",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "/blob/v-jinhzh/data/pubchem/graphseq/bin_data/pubchem-1m",
                "--task",
                "onemodel",
                "--criterion",
                "onemodel",
                "--arch",
                "onemodel",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-6",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "0.0003",
                "--warmup-updates",
                "10000",
                "--total-num-update",
                "125000",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.01",
                "--max-update",
                "125000",
                "--log-format",
                "simple",
                "--log-interval",
                "10",
                "--save-dir",
                "checkpoints/debug2",
                "--validate-interval-updates",
                "1000",
                "--save-interval-updates",
                "1000",
                "--max-tokens",
                "4096",
                "--graph-mask-prob",
                "0.3",
                "--seq-mask-prob",
                "0.3",
                "--truncate-source",
                "--fp16",
                "--datatype",
                "t"
            ],
            "justMyCode": false
        },
        {
            "name": "pretrain",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "CUDA_VISIBLE_DEVICES": "1"
            },
            "args": [
                "/blob/v-jinhzh/data/pubchem/graphseq/bin_data/pubchem-10m",
                "--task",
                "doublemodel",
                "--criterion",
                "doublemodel",
                "--arch",
                "doublemodel",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-6",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "0.0003",
                "--warmup-updates",
                "10000",
                "--total-num-update",
                "12500",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.01",
                "--max-update",
                "12500",
                "--log-format",
                "simple",
                "--log-interval",
                "10",
                "--save-dir",
                "checkpoints/debug2",
                "--validate-interval-updates",
                "1000",
                "--save-interval-updates",
                "1000",
                "--max-tokens",
                "4096",
                "--normalize-before-ct",
                "--report-accuracy",
                "--graph-mask-prob",
                "0.3",
                "--seq-mask-prob",
                "0.3",
                "--use-byol-cosine",
                "--use-mlm",
                "--datatype",
                "tt",
                "--truncate-source"
            ],
            "justMyCode": false
        },
        {
            "name": "finetuneconsol",
            "type": "python",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "args": [
                "molnet-bin/clintox",
                "--restore-file",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/self-pubchem-10m-graphseq-tu-125000-wu-10000-lr-0.0005-uf-16-mt-8192/checkpoint89.pt",
                "--max-positions",
                "512",
                "--batch-size",
                "32",
                "--max-tokens",
                "4400",
                "--task",
                "graphseq_sp",
                "--reset-optimizer",
                "--reset-dataloader",
                "--reset-meters",
                "--required-batch-size-multiple",
                "1",
                "--arch",
                "graphseq",
                "--criterion",
                "graphseq_sp",
                "--classification-head-name",
                "molecule_head",
                "--num-classes",
                "2",
                "--dropout",
                "0.1",
                "--attention-dropout",
                "0.1",
                "--weight-decay",
                "0.1",
                "--optimizer",
                "adam",
                "--adam-betas",
                "(0.9, 0.98)",
                "--adam-eps",
                "1e-06",
                "--clip-norm",
                "0.0",
                "--lr-scheduler",
                "polynomial_decay",
                "--lr",
                "1e-5",
                "--total-num-update",
                "1480",
                "--warmup-updates",
                "89",
                "--fp16",
                "--fp16-init-scale",
                "4",
                "--threshold-loss-scale",
                "1",
                "--fp16-scale-window",
                "128",
                "--max-epoch",
                "10",
                "--best-checkpoint-metric",
                "accuracy",
                "--maximize-best-checkpoint-metric",
                "--shorten-method",
                "truncate",
                "--find-unused-parameters",
                "--update-freq",
                "1",
                "--save-dir",
                "checkpoints/clintox",
                "--graph-coff",
                "0.",
            ],
            "cwd": "${workspaceFolder}"
        },
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}"
        },
        {
            "name": "inference",
            "type": "python",
            "request": "launch",
            "program": "molecule/inference.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                // "/tmp/data",
                "/blob/v-jinhzh/model/pretrainmol/checkpoints/kddcup/trytoy/checkpoint2.pt",
            ]
            // "args": [
            //     "molnet-bin/kfold_s0_bbbp/p_np",
            //     "checkpoints/kfold_s0_bbbp/p_np/checkpoint_last.pt",
            //     "--subset",
            //     "test"
            // ]
        }
    ]
}